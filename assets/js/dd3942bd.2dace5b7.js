"use strict";(self.webpackChunkjellyfish_docs=self.webpackChunkjellyfish_docs||[]).push([[8563],{64758:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var r=t(74848),i=t(28453);const o={},s="Recording",l={id:"getting_started/components/recording",title:"Recording",description:"This feature saves RTP streams (all streams going through a room) to an S3 bucket, while simultaneously creating a report.json file that contains all necessary information to depayload and decode the saved streams.",source:"@site/versioned_docs/version-0.5.0/getting_started/components/recording.md",sourceDirName:"getting_started/components",slug:"/getting_started/components/recording",permalink:"/jellyfish-docs/getting_started/components/recording",draft:!1,unlisted:!1,editUrl:"https://github.com/jellyfish-dev/jellyfish-docs/versioned_docs/version-0.5.0/getting_started/components/recording.md",tags:[],version:"0.5.0",frontMatter:{},sidebar:"mainSidebar",previous:{title:"SIP",permalink:"/jellyfish-docs/getting_started/components/sip"},next:{title:"WebRTC",permalink:"/jellyfish-docs/getting_started/peers/webrtc"}},c={},a=[{value:"Compatibility",id:"compatibility",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Configuration options",id:"configuration-options",level:2},{value:"Environment variables",id:"environment-variables",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"recording",children:"Recording"}),"\n",(0,r.jsxs)(n.p,{children:["This feature saves RTP streams (all streams going through a room) to an S3 bucket, while simultaneously creating a ",(0,r.jsx)(n.code,{children:"report.json"})," file that contains all necessary information to depayload and decode the saved streams."]}),"\n",(0,r.jsx)(n.p,{children:"To utilize the output of the Recording Component:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The streams are serialized using the  ",(0,r.jsx)(n.a,{href:"https://github.com/membraneframework/membrane_stream_plugin",children:"Membrane Stream Plugin"}),". Use the deserializer from this plugin to obtain the plain RTP."]}),"\n",(0,r.jsx)(n.li,{children:"In order to depayload RTP packets to the codecs, use the RTP depayloader bin from the Membrane RTP Plugin."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For an example pipeline, please refer to the ",(0,r.jsx)(n.a,{href:"https://github.com/jellyfish-dev/recording-converter",children:"Recording Converter"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"compatibility",children:"Compatibility"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/jellyfish-docs/getting_started/peers/webrtc",children:"WebRTC"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/jellyfish-docs/getting_started/components/rtsp",children:"RTSP"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/jellyfish-docs/getting_started/components/sip",children:"SIP"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/jellyfish-docs/getting_started/components/file",children:"File"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.a,{href:"../../introduction/basic_concepts#room",children:"Room"})," in which the Recording component is created must have the video codec set to H264.\nSee ",(0,r.jsx)(n.a,{href:"../../for_developers/api_reference/rest_api#tag/room/operation/create_room",children:"API"})," for more information."]}),"\n",(0,r.jsx)(n.li,{children:"Max 1 Recording component allowed per room."}),"\n",(0,r.jsx)(n.li,{children:"Remember to provide credentials and path prefix through only one method. Otherwise recording compontent won't create."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration-options",children:"Configuration options"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Optional"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"path_prefix"}),' (String, default: "") - This option defines the path prefix under which all streams will be stored.']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"credentials"})," (Object, default: null) - Here you can provide your AWS S3 credentials.\nIf this is set to null, you will need to provide these credentials via environment variables.\nOnce uploaded, the stream will be accessible in the ",(0,r.jsx)(n.code,{children:"<path-prefix>/<room-id>"})," directory in the S3 bucket.\nPlease refer to the ",(0,r.jsx)(n.a,{href:"../../for_developers/api_reference/rest_api#tag/room/operation/add_component",children:"Configuration API"})," for exact structure of the AWS S3 credentials."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"subscribeMode"}),' (string "manual" or "auto", default: "auto") - whether Recording component should automatically start consuming available tracks.\nWhen set to ',(0,r.jsx)(n.code,{children:"manual"}),", Recording component has to be explicitly told to subscribe to a specific peer/component tracks using\nthe ",(0,r.jsx)(n.a,{href:"../../for_developers/api_reference/rest_api#tag/room/operation/subscribe_to",children:"Subscription API"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"environment-variables",children:"Environment variables"}),"\n",(0,r.jsx)(n.p,{children:"If you prefer not to pass these parameters through the REST API, you should declare the following environment variables for the S3 bucket:"}),"\n",(0,r.jsx)(n.p,{children:"Credentials:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"JF_S3_BUCKET"})," - The name of the S3 bucket where the RTP streams will be stored."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"JF_S3_REGION"})," - The AWS region where your S3 bucket is located."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"JF_S3_ACCESS_KEY_ID"})," - Your AWS access key ID."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"JF_S3_SECRET_ACCESS_KEY"})," - Your secret access key for AWS.\nPath prefix:"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"JF_S3_PATH_PREFIX"})," - path prefix under which all streams will be stored."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var r=t(96540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);